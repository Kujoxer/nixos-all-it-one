# Очистка поколений NixOS

### Заметка: Очистка ненужных поколений в NixOS

#### 1. **Проверка текущих поколений**
Чтобы посмотреть список установленных поколений (generations), выполните:  
```bash
nix-env --list-generations
```

#### 2. **Удаление старых поколений**
Удалите старые поколения и освободите место:  
```bash
sudo nix-collect-garbage -d
```
- Флаг `-d` оставляет только текущее активное поколение.

#### 3. **Обновление загрузчика systemd**
После удаления поколений обновите конфигурацию загрузчика:  
```bash
sudo nixos-rebuild boot
```

#### 4. **Очистка хранилища Nix**
Удалите устаревшие данные из `/nix/store`:  
```bash
sudo nix-store --gc
```

#### 5. **Проверка свободного места**
Для проверки очищенного пространства используйте:  
```bash
df -h /nix/store
```

#### Итоговые команды:
```bash
sudo nix-collect-garbage -d
sudo nix-store --gc
sudo nixos-rebuild boot
```

Теперь система очищена от старых поколений и ненужных данных.
